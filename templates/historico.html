{% extends "base.html" %}

{% block conteudo %}

<h1>Hist√≥rico de Vendas</h1>

<p>
  Usu√°rio: <b>{{ usuario }}</b> ({{ tipo }})
</p>

<a class="button" href="/registrar">Registrar Nova Venda</a>
<a class="button" href="/logout">Sair</a>

<br><br>

<!-- üîé FILTRO POR DATA -->
<form method="get">
    <label>
        Data inicial:
        <input type="date" name="data_inicio" value="{{ data_inicio }}">
    </label>

    &nbsp;&nbsp;

    <label>
        Data final:
        <input type="date" name="data_fim" value="{{ data_fim }}">
    </label>

    &nbsp;&nbsp;

    <button type="submit">Filtrar</button>
    <a href="/historico" class="button">Limpar</a>
</form>

<br>

<a class="button" href="/download">Baixar CSV</a>

<br><br>

{% if vendas %}
<table>
    <tr>
        <th>Data</th>
        <th>Cliente</th>
        <th>Barbeiro</th>
        <th>Cabelo</th>
        <th>Barba</th>
        <th>Sobrancelha</th>
        <th>Produto</th>
        <th>Desconto</th>
        <th>Total</th>
    </tr>

    {% for v in vendas %}
    <tr>
        <td>{{ v["data"] }}</td>
        <td>{{ v["cliente"] }}</td>
        <td>{{ v["barbeiro"] }}</td>
        <td>R$ {{ v["cabelo"] }}</td>
        <td>R$ {{ v["barba"] }}</td>
        <td>R$ {{ v["sobrancelha"] }}</td>
        <td>R$ {{ v["produto"] }}</td>
        <td>R$ {{ v["desconto"] }}</td>
        <td><b>R$ {{ v["total"] }}</b></td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>Nenhuma venda encontrada para o per√≠odo selecionado.</p>
{% endif %}

{% endblock %}
